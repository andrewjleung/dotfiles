# prelude

_setup_shell() {
  # mise must come first to ensure tools and env are set
  eval "$("$HOME"/.local/bin/mise activate zsh)"
  eval "$(/opt/homebrew/bin/brew shellenv)"
  export ZSH="$HOME/.oh-my-zsh"

  # shellcheck disable=SC2034
  plugins=(
    alias-finder
    aliases
    command-not-found
    chezmoi
    fzf
    gh
    git
    golang
    httpie
    mise
    rust
    tmux
    zsh-autosuggestions
    zsh-syntax-highlighting
  )

  zstyle ':omz:plugins:alias-finder' autoload yes
  zstyle ':omz:plugins:alias-finder' cheaper yes
  zstyle ':omz:update' mode auto

  # shellcheck disable=SC1091
  source "$ZSH/oh-my-zsh.sh"

  eval "$(starship init zsh)"
  eval "$(zoxide init zsh)"
}

inspect_path() {
  # shellcheck disable=SC2001
  echo "$PATH" | sed 's/:/\n/g'
}

miseg() {
  mise "$@" -p "$HOME/.config/mise/mise.toml"
}

misel() {
  mise "$@" -p "$HOME/.config/mise/mise.local.toml"
}

# start

_setup_shell

export PATH="/opt/homebrew/opt/curl/bin:$PATH"
export PATH="$DEV/scripts/bin:$PATH"
export PATH="/usr/local/texlive/2022/bin/universal-darwin/:$PATH"

alias ca="chezmoi apply"
alias ccd="chezmoi cd"
alias n="nvim ."
